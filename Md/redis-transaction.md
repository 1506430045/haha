相关命令

DISCARD`取消事务,放弃执行事务块内的所有命令。如果正在使用WATCH命令监视某个或者某些key,那么取消所有的监视,等同于执行 UNWATCH.

EXEC    执行所有事务块内的命令

MULTI   标记一个事务块的开始

UNWATCH 取消WATCH命令对所有key的监视。如果执行WATCH命令之后,EXEC命令或DISCARD命令先被执行了的话,那么不需要执行UNWATCH了。因为EXEC命令会执行事务,因此WATCH命令的效果已经产生了;而DISCARD命令取消事务的同时也会取消对所有key的监视。

WATCH   监视一个或者多个key,若果在事务执行之前被监视的key被其他命令所改动,那么事务将被打断。


事务中的错误

    1、事务在执行EXEC之前,入队命令出错
        1.1 语法错误（参数数量、参数名称、内存不足等等）
        
    2、命令可能在EXEC调用之后失败
        2.1 处理了错误类型的键 
        
        
为什么Redis不支持回滚（rollback）

不支持回滚的优点:

    1、Redis只会因为错误的命令而失败（并且这些问题不能在入队的时候发现),或是命令用在了错误类型的键上面
    2、因为不需要支持回滚,所以Redis内部可以保持简单且快速
    
使用check-and-set操作实现乐观锁
    
    
    